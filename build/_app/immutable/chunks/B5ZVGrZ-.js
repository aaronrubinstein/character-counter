import{ae as I,af as N,U as S,K as B,L as T,I as g,C as P,B as U,R as F,ag as Y,E as C,F as K,_ as j,ah as q,H as z,X as H,V as $,a7 as w,ai as G,aj as V,ak as X,al as Z,am as O,h as b,j as J,an as Q,ao as W,ap as k,D as E,aq as ee,z as se,ar as te,u as re,b as ae,as as ne,at as ie,au as x,M as D,av as fe,aw as ue,S as ce,ax as oe}from"./DpILZdS2.js";class de{anchor;#s=new Map;#t=new Map;#e=new Map;#r=new Set;#a=!0;constructor(e,r=!0){this.anchor=e,this.#a=r}#n=()=>{var e=I;if(this.#s.has(e)){var r=this.#s.get(e),t=this.#t.get(r);if(t)N(t),this.#r.delete(r);else{var f=this.#e.get(r);f&&(this.#t.set(r,f.effect),this.#e.delete(r),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),t=f.effect)}for(const[a,i]of this.#s){if(this.#s.delete(a),a===e)break;const n=this.#e.get(i);n&&(S(n.effect),this.#e.delete(i))}for(const[a,i]of this.#t){if(a===r||this.#r.has(a))continue;const n=()=>{if(Array.from(this.#s.values()).includes(a)){var o=document.createDocumentFragment();F(i,o),o.append(T()),this.#e.set(a,{effect:i,fragment:o})}else S(i);this.#r.delete(a),this.#t.delete(a)};this.#a||!t?(this.#r.add(a),B(i,n,!1)):n()}}};#i=e=>{this.#s.delete(e);const r=Array.from(this.#s.values());for(const[t,f]of this.#e)r.includes(t)||(S(f.effect),this.#e.delete(t))};ensure(e,r){var t=I,f=Y();if(r&&!this.#t.has(e)&&!this.#e.has(e))if(f){var a=document.createDocumentFragment(),i=T();a.append(i),this.#e.set(e,{effect:g(()=>r(i)),fragment:a})}else this.#t.set(e,g(()=>r(this.anchor)));if(this.#s.set(t,e),f){for(const[n,u]of this.#t)n===e?t.skipped_effects.delete(u):t.skipped_effects.add(u);for(const[n,u]of this.#e)n===e?t.skipped_effects.delete(u.effect):t.skipped_effects.add(u.effect);t.oncommit(this.#n),t.ondiscard(this.#i)}else P&&(this.anchor=U),this.#n()}}function be(s,e,r=!1){P&&K();var t=new de(s),f=r?j:0;function a(i,n){if(P){const o=q(s)===z;if(i===o){var u=H();$(u),t.anchor=u,w(!1),t.ensure(i,n),w(!0);return}}t.ensure(i,n)}C(()=>{var i=!1;e((n,u=!0)=>{i=!0,a(u,n)}),i||a(!1,null)},f)}let p=!1,le=Symbol();function me(s,e){return s.set(e),e}function Se(){const s={};function e(){G(()=>{for(var r in s)s[r].unsubscribe();V(s,le,{enumerable:!1,value:!0})})}return[s,e]}function _e(s){var e=p;try{return p=!1,[s(),p]}finally{p=e}}const he={get(s,e){if(!s.exclude.includes(e))return b(s.version),e in s.special?s.special[e]():s.props[e]},set(s,e,r){if(!(e in s.special)){var t=E;try{D(s.parent_effect),s.special[e]=ve({get[e](){return s.props[e]}},e,O)}finally{D(t)}}return s.special[e](r),x(s.version),!0},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},deleteProperty(s,e){return s.exclude.includes(e)||(s.exclude.push(e),x(s.version)),!0},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function Pe(s,e){return new Proxy({props:s,exclude:e,special:{},version:se(0),parent_effect:E},he)}function ve(s,e,r,t){var f=!ae||(r&ne)!==0,a=(r&te)!==0,i=(r&fe)!==0,n=t,u=!0,o=()=>(u&&(u=!1,n=i?re(t):t),n),l;if(a){var y=ce in s||oe in s;l=X(s,e)?.set??(y&&e in s?c=>s[e]=c:void 0)}var _,R=!1;a?[_,R]=_e(()=>s[e]):_=s[e],_===void 0&&t!==void 0&&(_=o(),l&&(f&&Z(),l(_)));var d;if(f?d=()=>{var c=s[e];return c===void 0?o():(u=!0,c)}:d=()=>{var c=s[e];return c!==void 0&&(n=void 0),c===void 0?n:c},f&&(r&O)===0)return d;if(l){var M=s.$$legacy;return(function(c,v){return arguments.length>0?((!f||!v||M||R)&&l(v?d():c),c):d()})}var m=!1,h=((r&ie)!==0?J:Q)(()=>(m=!1,d()));a&&b(h);var L=E;return(function(c,v){if(arguments.length>0){const A=v?b(h):f&&a?W(c):c;return k(h,A),m=!0,n!==void 0&&(n=A),c}return ue&&m||(L.f&ee)!==0?h.v:b(h)})}export{de as B,me as a,be as i,Pe as l,ve as p,Se as s};
